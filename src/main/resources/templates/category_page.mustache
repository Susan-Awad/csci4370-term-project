<!DOCTYPE html>
<html lang="en">
{{> fragments/html_header}}

<body>

    {{> fragments/top_bar}}

    <main class="page-content">

        <h1>My Categories</h1>

        {{#errorMessage}}
            <div class="error">
                {{.}}
            </div>
        {{/errorMessage}}

        <!-- Form to add a new category -->
        <section class="card">
            <h2>Add New Category</h2>
            <form action="/categories" method="post" class="category-form">
                <div class="form-row">
                    <label for="categoryName">Name</label>
                    <input type="text" id="categoryName" name="categoryName" required>
                </div>

                <div class="form-row">
                    <label for="categoryType">Type</label>
                    <select id="categoryType" name="categoryType" required>
                        <option value="EXPENSE">Expense</option>
                        <option value="INCOME">Income</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="categoryColor">Color (optional)</label>
                    <input type="text" id="categoryColor" name="categoryColor" placeholder="e.g. red, #ff0000">
                </div>

                <button type="submit">Add Category</button>
            </form>
        </section>

        <!-- List of existing categories -->
        <section class="card">
            <h2>Existing Categories</h2>

            {{#isNoContent}}
                <p>You donâ€™t have any categories yet.</p>
            {{/isNoContent}}

            {{^isNoContent}}
                <table class="category-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Color</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#categories}}
                            <tr>
                                <td>{{categoryName}}</td>
                                <td>{{categoryType}}</td>
                                <td>{{categoryColor}}</td>
                                <td>
                                    <form action="/categories/{{categoryId}}/delete" method="post" style="display:inline;">
                                        <button type="submit">Delete</button>
                                    </form>
                                </td>
                            </tr>
                        {{/categories}}
                    </tbody>
                </table>
            {{/isNoContent}}
        </section>

    </main>

    {{> fragments/footer}}

</body>
</html>